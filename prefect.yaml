# prefect.yaml
name: fantasy-premier-league
prefect-version:

build:

push:

pull:
- prefect.deployments.steps.git_clone:
    repository: https://github.com/bonsuot/fantasy-premier-league.git
    access_token: "{{ prefect.blocks.secret.github-token }}"
    # credentials: "{{ prefect.blocks.github-credentials.my-credentials }}"

deployments:
- name: fantasy-premier-league
  version:
  tags: [fpl_etl, database, api]
  concurrency_limit:
  description: Main flow orchestrating the entire ETL pipeline
  entrypoint: fpl_etl.py:main_flow
  parameters: {"mode":"auto"}
  work_pool:
    name: my-fpl-pool
    work_queue_name:
    job_variables: {}
  enforce_parameter_schema: true
  schedules:
  - cron: 0 0 12 * * * # Every 12 hours
    timezone: UTC
    day_or: true
    active: true
    max_active_runs:
    catchup: false
  storage:
    block_type_slug: github
    block_name: fpl-github-repo
